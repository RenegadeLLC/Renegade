!function(s){"use strict";function e(){a(),i()}function r(e,a,i,o){s.ajax({type:"POST",url:bsr_object_vars.endpoint+e,data:{bsr_ajax_nonce:bsr_object_vars.ajax_nonce,action:e,bsr_step:a,bsr_page:i,bsr_data:o},dataType:"json",success:function(a){"undefined"!=typeof a.message&&(s(".bsr-description").remove(),s(".bsr-progress-wrap").append('<p class="description bsr-description">'+a.message+"</p>")),"done"==a.step?(n("100%"),"undefined"!=typeof a.next_action?(n("0%",0),r(a.next_action,0,0,a.bsr_data)):(s(".bsr-spinner").remove(),s(".bsr-progress-wrap").remove(),s(".bsr-disabled").removeClass("bsr-disabled button-disabled"),window.location=a.url)):(n(a.percentage),r(e,a.step,a.page,a.bsr_data))}}).fail(function(e){s(".bsr-spinner").remove(),s(".bsr-progress-wrap").remove(),s(".bsr-disabled").removeClass("bsr-disabled button-disabled"),s("#bsr-error-wrap").html('<div class="error"><p>'+bsr_object_vars.unknown+"</p></div>"),window.console&&window.console.log&&console.log(e)})}function a(){var e=s("#bsr-submit"),a=s("#bsr-error-wrap");e.click(function(n){if(n.preventDefault(),!e.hasClass("button-disabled"))if(s("#search_for").val())if(s("#select_tables").val()){var i=s(".bsr-action-form").serialize();a.html(""),e.addClass("bsr-disabled button-disabled"),s("#bsr-submit-wrap").append('<div class="spinner is-active bsr-spinner"></div><div class="bsr-progress-wrap"><div class="bsr-progress"></div></div>'),r("process_search_replace",0,0,i)}else a.html('<div class="error"><p>'+bsr_object_vars.no_tables+"</p></div>");else a.html('<div class="error"><p>'+bsr_object_vars.no_search+"</p></div>")})}function n(e,r){"undefined"==typeof r&&(r=150),s(".bsr-progress").animate({width:e},r)}function i(){s("#bsr-slider").slider({value:bsr_object_vars.page_size,range:"min",min:1e3,max:5e4,step:1e3,change:function(e,r){s("#bsr-page-size-value").text(r.value),s("#bsr_page_size").val(r.value)}})}e()}(jQuery);
